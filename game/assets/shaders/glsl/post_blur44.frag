//--------------------------------------------------------------------------------------
// INCLUDES
//--------------------------------------------------------------------------------------
#include "glsldefines.h"

//--------------------------------------------------------------------------------------
// UNIFORMS VARIABLES
//--------------------------------------------------------------------------------------
uniform highp float4 gPixelSize;
uniform sampler2D gTexture0;

//--------------------------------------------------------------------------------------
// GLOBALS VARIABLES
//--------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------
// VARYING VARIABLES
//--------------------------------------------------------------------------------------
varying highp float2 vTexCoord;

//--------------------------------------------------------------------------------------
// PIXEL SHADER
//--------------------------------------------------------------------------------------
void main()
{   
	highp float result = 0.0;
	for ( int i = 0; i < 4; ++i ) 
	{
		for ( int j = 0; j < 4; ++j ) 
		{
			highp float2 offset = float2( gPixelSize.x * float( j ), gPixelSize.y * float( i ) );
			result += texture2D( gTexture0, vTexCoord + offset).r;
		}
	}
	
	highp float finalColor = result * 0.0625;		
    gl_FragColor = float4( finalColor, finalColor, finalColor, 1.0 );
}